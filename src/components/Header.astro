---
import Heading from "./Heading.astro";
---

<header class="w-full bg-background-primary px-4 py-6 md:px-8 md:py-8">
  <div class="grid grid-cols-6 md:grid-cols-12 items-center gap-3">
    <!-- Logo -->
    <div class="col-span-3 md:col-span-2 flex items-center">
      <a href="/" class="block">
        <img
          src="/img/logo_lilac.svg"
          alt="Børnebiffen logo"
          class="w-28 md:w-50"
        />
      </a>
    </div>

    <!-- Mine favoritter (kun desktop) -->
    <div class="hidden md:flex md:col-span-8 justify-end">
      <button
        id="authButton"
        class="flex items-center gap-2 bg-background-plum-200 px-6 py-2 rounded-full shadow-md hover:scale-[1.02] transition"
      >
        <span id="authLabel" class="text-text-primary">
          <Heading style="h5">Log ind</Heading>
          <!-- START TEKST -->
        </span>

        <img src="/img/plum_blub_header.svg" alt="" class="w-9 h-9" />
      </button>
    </div>

    <!-- Søge-felt -->
    <div
      class="col-span-3 md:col-span-9 md:col-start-11 flex justify-end md:justify-start"
    >
      <label class="relative w-full max-w-[300px] md:min-w-[300px]">
        <input
          type="text"
          placeholder="Søg..."
          class="w-full px-6 py-2 pr-10 md:py-3 md:text-[16px] rounded-full shadow-md bg-background-blue text-button-primary placeholder:text-button-primary focus:outline-none border-none"
        />

        <img
          src="/img/search.svg"
          alt="Søge-ikon"
          class="w-7 h-7 md:w-9 h-9 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"
        />
      </label>
    </div>
  </div>
</header>
<script is:inline>
  window.addEventListener("load", () => {
    const authButton = document.getElementById("authButton");
    const authLabel = document.getElementById("authLabel");

    function updateAuthButton() {
      const loggedIn = localStorage.getItem("logged_in") === "true";

      // Opdater tekst
      authLabel.innerHTML = loggedIn
        ? `<Heading style="h5">Mine favoritter</Heading>`
        : `<Heading style="h5">Log ind</Heading>`;

      // Klik-opførsel
      if (!loggedIn) {
        // Hvis ikke logget ind → åbner modal
        authButton.onclick = () => {
          const modal = document.getElementById("videoModal");
          modal?.classList.remove("hidden");
        };
      } else {
        // Hvis logget ind → klik gør ingenting
        authButton.onclick = () => {
          // Tom funktion - meningen at den skal føre videre til "Mine favoritter" side
        };
      }
    }

    updateAuthButton();
    window.addEventListener("authChange", updateAuthButton);
  });
</script>
